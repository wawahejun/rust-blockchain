# B1 区块链实现

本仓库包含一个简单而全面的 Rust 区块链实现。该区块链支持关键功能，包括基于工作量证明的区块挖掘、交易签名和验证、钱包管理以及用于交互的命令行界面。

## 目录

- [项目结构](#项目结构)
- [核心组件](#核心组件)
- [功能特性](#功能特性)
- [开始使用](#开始使用)
- [使用方法](#使用方法)
- [技术细节](#技术细节)

## 项目结构

```
blockchain-implementation/
├── src/
│   ├── main.rs              # 应用程序入口点
│   ├── block.rs             # 区块结构和方法
│   ├── blockchain.rs        # 区块链结构和操作
│   ├── transaction.rs       # 交易结构和签名
│   ├── wallet.rs            # 钱包管理和密钥操作
│   ├── merkle_tree.rs       # 交易的默克尔树实现
│   ├── node.rs              # 网络节点实现
│   ├── cli.rs               # 命令行界面
│   ├── pow.rs               # 工作量证明实现
│   └── utils.rs             # 实用功能
```

## 核心组件

### 区块 (`block.rs`)
定义了核心区块结构，包含：
- 区块索引
- 时间戳
- 交易列表
- 前一区块哈希
- 当前区块哈希
- 随机数（用于工作量证明）
- 交易的默克尔根

包括以下方法：
- 创建新区块
- 计算区块哈希
- 挖掘区块（工作量证明）

### 区块链 (`blockchain.rs`)
管理区块链，功能包括：
- 创建创世区块
- 向链中添加新区块
- 验证整个链的完整性
- 将区块链保存到文件
- 从文件加载区块链

### 交易 (`transaction.rs`)
定义交易结构，包含：
- 发送方地址
- 接收方地址
- 金额
- 数字签名

提供以下方法：
- 创建和签名交易
- 验证交易签名
- 将交易转换为字符串格式用于哈希计算

### 钱包 (`wallet.rs`)
实现加密货币钱包，功能包括：
- ED25519密钥对生成
- 从公钥派生地址
- 使用私钥签名数据
- 验证签名

### 默克尔树 (`merkle_tree.rs`)
实现默克尔树用于交易验证：
- 从交易列表创建树
- 为区块头计算默克尔根
- 高效的交易验证

### 节点 (`node.rs`)
提供点对点网络功能：
- 管理与对等节点的连接
- 跨网络同步区块链
- 管理区块链状态

### 命令行界面 (`cli.rs`)
用于与区块链交互的命令行界面：
- 创建新钱包
- 添加交易
- 挖掘区块
- 验证区块链

## 功能特性

- **工作量证明共识**：可调整难度的区块挖掘
- **交易安全**：使用ED25519的数字签名
- **数据完整性**：使用默克尔树进行高效的交易验证
- **数据持久化**：从文件存储保存和加载区块链状态
- **网络功能**：P2P网络同步
- **用户界面**：简单的命令行界面

## 开始使用

### 先决条件
- Rust和Cargo（最新稳定版本）
- 所需依赖项在`Cargo.toml`文件中指定

### 安装
```bash
# 克隆仓库
git clone <>

# 构建项目
cargo build --release
```

## 使用方法

可以通过命令行界面与区块链交互：

```bash
# 创建新钱包
cargo run -- create-wallet

# 添加交易
cargo run -- add-transaction --sender <发送方地址> --receiver <接收方地址> --amount <金额>

# 挖掘新区块
cargo run -- mine-block --miner <矿工地址>

# 验证区块链
cargo run -- validate-chain
```

## 技术细节

### 共识算法
该项目使用工作量证明（PoW）作为共识机制，矿工必须找到满足特定难度标准的哈希值。创建区块链时可以配置难度。

### 密码学
- **哈希计算**：用于区块哈希的SHA-256
- **签名**：用于交易签名的ED25519
- **密钥管理**：用于存储的PKCS#8格式

### 数据结构
- **区块**：包含区块头元数据和交易列表
- **默克尔树**：交易哈希的二叉树，用于高效验证
- **交易**：包括发送方、接收方、金额和签名

### 网络
简单的点对点网络，具有跨节点同步区块链数据的能力。
